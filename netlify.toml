[build.environment]
  NODE_VERSION = "18"
  NPM_FLAGS = "--version" # prevent Netlify npm install

# Documentation
[build]
  publish = "docs/.vitepress/dist"
  command = "npx pnpm i --store=node_modules/.pnpm-store && npm run docs:build:ci"

# Alias for the main page
[[redirects]]
  from = "https://v7.fakerjs.dev"
  to = "https://fakerjs.dev"
  status = 302
  force = true

# Alias for the next page
[[redirects]]
  from = "https://v8.fakerjs.dev"
  to = "https://next.fakerjs.dev"
  status = 302
  force = true

# Redirect to Discord server
[[redirects]]
  from = "https://chat.fakerjs.dev"
  to = "https://discord.gg/wq78qyhdSZ"
  status = 302
  force = true

[[redirects]]
  from = "/chat"
  to = "https://discord.gg/wq78qyhdSZ"
  status = 302
  force = true

# Redirect to StackBlitz playground
[[redirects]]
  from = "https://new.fakerjs.dev"
  to = "https://stackblitz.com/edit/faker-js-demo?file=index.ts"
  status = 301
  force = true

[[redirects]]
  from = "/new"
  to = "https://stackblitz.com/edit/faker-js-demo?file=index.ts"
  status = 301
  force = true

# Redirect old update page to new announcement section
[[redirects]]
  from = "/update.html"
  to = "https://fakerjs.dev/about/announcements/2022-01-14.html"
  status = 301
  force = true
